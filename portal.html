<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Portal &mdash; ochonetes 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="ochonetes 1.0 documentation" href="index.html" />
    <link rel="prev" title="Concepts" href="concepts.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="concepts.html" title="Concepts"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">ochonetes 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="portal">
<h1>Portal<a class="headerlink" href="#portal" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-shell">
<h2>The shell<a class="headerlink" href="#the-shell" title="Permalink to this headline">¶</a></h2>
<div class="section" id="curl">
<h3>CURL<a class="headerlink" href="#curl" title="Permalink to this headline">¶</a></h3>
<p>The <em>portal</em> application runs a <a class="reference external" href="http://flask.pocoo.org/">Flask</a> endpoint listening on TCP 9000. It listens for shell requests and runs them
in a temporary directory. Each request must map to one our tools.</p>
<p>You can access the <em>portal</em> from the outside world by simply CURLing commands with a <strong>POST /shell</strong>. The shell
snippet is passed via the <strong>X-Shell</strong> header. You can for instance run the <em>ls</em> tool this way:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ curl -X POST -H &quot;X-Shell:ls&quot; http://52.6.130.234:9000/shell
{&quot;ok&quot;: true, &quot;ms&quot;: 463, &quot;out&quot;: &quot;\n1 pods, 100% running -&gt;\n - default.ocho-proxy #1\n&quot;}
</pre></div>
</div>
<p>You can upload files as well (for instance when deploying clusters). The files will land in the temporary directory
and be wiped out as soon as the tool completes. Just use a regular multi-part upload, for instance:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>$ curl -X POST -H &quot;X-Shell:deploy redis -p 3&quot; -F &quot;redis=@redis.yml&quot; http://52.6.130.234:9000/shell
</pre></div>
</div>
<p>The response is a serialized JSON object featuring the raw stdout dump of whatever tool you ran. It is thus quite
trivial to build a shallow CLI front-end on your end to interact with the remote shell. Any failure will set the <em>ok</em>
boolean to false (e.g non-zero exit code from the tool process).</p>
</div>
<div class="section" id="using-a-browser">
<h3>Using a browser<a class="headerlink" href="#using-a-browser" title="Permalink to this headline">¶</a></h3>
<p>The <em>portal</em> will also return HTML on TCP 9000 for a <strong>GET /</strong>. We serve back a simple <a class="reference external" href="https://jquery.com/">JQuery</a> terminal that will allow
you to interactively perform the same shell calls via AJAX.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/autodesk-logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Portal</a><ul>
<li><a class="reference internal" href="#the-shell">The shell</a><ul>
<li><a class="reference internal" href="#curl">CURL</a></li>
<li><a class="reference internal" href="#using-a-browser">Using a browser</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="concepts.html" title="previous chapter">Concepts</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright 2015, Autodesk.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  
  </body>
</html>